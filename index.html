<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DF | Community</title>
    <style>
        :root {
            --bg-color: #05070a;
            --panel-color: #12161d;
            --border-color: #1e2530;
            --accent-color: #afe7fa;
            --text-main: #ffffff;
            --text-dim: #6d7c90;
        }
        body { background-color: var(--bg-color); color: var(--text-main); font-family: 'Segoe UI', sans-serif; margin: 0; }
        nav { background: var(--panel-color); border-bottom: 2px solid var(--accent-color); padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; }
        .logo-section { display: flex; align-items: center; gap: 15px; }
        .logo { font-weight: bold; font-size: 1.5rem; color: var(--accent-color); text-transform: uppercase; text-decoration: none; font-family: monospace; }
        .admin-btn { background: #e74c3c; color: white; padding: 4px 10px; border-radius: 4px; font-size: 0.7rem; font-weight: bold; text-decoration: none; display: none; }
        .login-btn { background: transparent; border: 1px solid var(--accent-color); color: var(--accent-color); padding: 8px 16px; border-radius: 4px; cursor: pointer; font-weight: bold; }
        .container { max-width: 1100px; margin: 20px auto; padding: 0 15px; }
        .category-header { background: #16202e; border-left: 4px solid var(--accent-color); color: var(--accent-color); padding: 10px 15px; font-weight: bold; text-transform: uppercase; font-size: 0.9rem; margin-top: 20px; }
        .forum-table { width: 100%; background: var(--panel-color); border-collapse: collapse; border: 1px solid var(--border-color); }
        .forum-row td { padding: 15px; border-bottom: 1px solid var(--border-color); }
        .forum-title { color: var(--accent-color); text-decoration: none; font-weight: bold; }
    </style>
</head>
<body>
    <nav>
      <div class="logo-section">
        <a href="index.html" class="logo">x<span>BOARD</span></a>
        <a href="admin_dashboard.html" id="admin-link" class="admin-btn">ADMIN</a>
      </div>
      <div style="display: flex; align-items: center; gap: 15px">
        <span id="user-display" style="font-size: 0.9rem; color: var(--text-dim)">Guest</span>
        <button id="auth-btn" class="login-btn">Login</button>
      </div>
    </nav>

    <div class="container">
      <div class="category-header">General Discussions</div>
      <table class="forum-table">
        <tr class="forum-row">
          <td><a href="#" class="forum-title">Community Lounge</a><div style="color:var(--text-dim); font-size:0.8rem">Talk about anything.</div></td>
        </tr>
      </table>

      <div class="category-header">Development & Tech</div>
      <table class="forum-table">
        <tr class="forum-row">
          <td><a href="#" class="forum-title">Coding & Scripts</a><div style="color:var(--text-dim); font-size:0.8rem">Share code projects.</div></td>
        </tr>
      </table>
    </div>

    <script type="module">
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
      import { getAuth, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
      import { getFirestore, doc, getDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

      const firebaseConfig = {
        apiKey: 'AIzaSyBTZmr8e_Gk9ltVEdVPOhI8Od9bD3tbrdA',
        authDomain: 'rebornforums.firebaseapp.com',
        projectId: 'rebornforums',
        storageBucket: 'rebornforums.firebasestorage.app',
        messagingSenderId: '499435360097',
        appId: '1:499435360097:web:c5c1fc54e4c37e784b7f20',
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db = getFirestore(app);

      onAuthStateChanged(auth, async (user) => {
        const userDisplay = document.getElementById('user-display');
        const authBtn = document.getElementById('auth-btn');
        const adminLink = document.getElementById('admin-link');

        if (user) {
          userDisplay.innerHTML = `Logged in as: <b style="color:var(--accent-color)">${user.displayName || 'User'}</b>`;
          authBtn.textContent = 'Logout';
          authBtn.onclick = () => signOut(auth).then(() => window.location.reload());

          const userDoc = await getDoc(doc(db, "users", user.uid));
          if (userDoc.exists() && userDoc.data().role === "Admin") {
              adminLink.style.display = "inline-block";
          }
        } else {
          userDisplay.textContent = 'Welcome, Guest';
          authBtn.textContent = 'Login / Sign Up';
          authBtn.onclick = () => window.location.href = 'login.html';
        }
      });
    </script>
</body>
</html>
